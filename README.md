$ Bakery Shop project [ë² ì´ì»¤ë¦¬ ì‡¼í•‘ëª°]

## ğŸ§ ë°°ê²½

- ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ Jpa, Security ë“±ì˜ ê¸°ìˆ ìŠ¤íƒë“¤ì„ ì´ìš©í•´ ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì™„ì„±í–ˆì§€ë§Œ, ê´€ë ¨ ì§€ì‹ì„ ë” ìˆ™ì§€í•  í•„ìš”ì„±ì„ ëŠê»´ì„œ
  í•™ìŠµ ëª©ì ìœ¼ë¡œ ì‹œì‘í•˜ê²Œ ëìŠµë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ê°œë°œ í™˜ê²½
1.  ìš´ì˜ì²´ì œ : Windows 10
2.  í†µí•©ê°œë°œí™˜ê²½(IDE) : intellij
3.  JDK ë²„ì „ : JDK 11
4.  ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ : 2.5.2
6.  ë¹Œë“œ íˆ´ : Maven
7.  ê´€ë¦¬ íˆ´ : GitHub

#### ì£¼ìš” í”„ë ˆì„ì›Œí¬ / ë¼ì´ë¸ŒëŸ¬ë¦¬
- Java 11
- SpringBoot 2.7.1
- SpringBoot Security
- Spring Data JPA
- QueryDsl

#### DataBase 
- MySql

#### í”„ë¡ íŠ¸ì—”ë“œ
- Html/Css
- Thymeleaf
- Bootstrap5

#### API
- OAuth2.0 API, Java Mail

#  ğŸ“œí”„ë¡œì íŠ¸ êµ¬í˜„ê¸°ëŠ¥

-   **íšŒì› (Member)**
      -   íšŒì›ê°€ì… / ì´ë©”ì¼ ì¸ì¦ / ì„ì‹œë¹„ë°€ë²ˆí˜¸ ì „ì†¡ / ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° / ë¡œê·¸ì¸ , ë¡œê·¸ì•„ì›ƒ / êµ¬ê¸€ ë¡œê·¸ì¸ / ìœ ì €(User), ê´€ë¦¬ì(Admin) / ë‚´ ì •ë³´

-   **ìƒí’ˆ (Item)**
      -  ìƒí’ˆ ë“±ë¡ / ìƒí’ˆ ìˆ˜ì • / ìƒí’ˆ ì‚­ì œ / ìƒí’ˆ ë¦¬ìŠ¤íŠ¸(ë©”ì¸í˜ì´ì§€ , ì¹´í…Œê³ ë¦¬ , ìƒí’ˆê²€ìƒ‰ ) / ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ 

-   **ì¥ë°”êµ¬ë‹ˆ (Cart)**
    -   ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° / ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ / ì¥ë°”êµ¬ë‹ˆ ì‚­ì œ / ì¥ë°”êµ¬ë‹ˆ ìˆ˜ëŸ‰ ê°€ê²©

-  **ì£¼ë¬¸ (Order)**  
    - ìƒí’ˆ ì£¼ë¬¸ / ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ / íŒë§¤ ëª©ë¡(Admin) / ì£¼ë¬¸ì·¨ì†Œ

## í•µì‹¬ í‚¤ì›Œë“œ
- ìŠ¤í”„ë§ë¶€íŠ¸, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°, JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°íš
- ë°±ì—”ë“œ ê°œë°œì˜ ì „ê³¼ì • ìš´ì˜ ê²½í—˜
- MVC í”„ë ˆì„ì›Œí¬ ê¸°ë°˜ìœ¼ë¡œ ë°±ì—”ë“œ ì„œë²„ë¥¼ êµ¬ì¶•
- RestFur APIë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ëŠ” ê²½í—˜
- ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ êµ¬í˜„í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ ì¸¡ë©´ì„ ê³ ë ¤í•˜ëŠ” ê²½í—˜

### ì†Œì…œ ë¡œê·¸ì¸ (google)
- Spring Security
- OAuth2 ì¸ì¦ ë°©ì‹ ì‚¬ìš©

`WebSecurityConfigurerAdapter` ê°€ Deprecated ë¨ì— ë”°ë¼ `SecurityFilterChain` ì„ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½  

ë‹¤ìŒì˜ ë¡œì§ë“¤ë¡œ êµ¬í˜„í•¨
1. DefaultOAuth2UserService ë¥¼ ìƒì†í•´ì„œ ë§Œë“  ì»¤ìŠ¤í…€ OAuth2UserService
2. UserDetails ë©”ì„œë“œì— ì‹¤ì œ OAuth2User êµ¬í˜„
3. ìœ„ì˜ ë‚´ìš©ë“¤ì„ ë°˜ì˜í•˜ëŠ” SecurityConfig ì„¤ì •
4. MemberService ì—ì„œ loadUserByUsername ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ íšŒì›ì„ ì°¾ë„ë¡ í•¨.
5. MemberController ì—ì„œ UserDetail  
    Form ë¡œê·¸ì¸ì´ë©´ UserDetails,
    OAuth2 ë¡œê·¸ì¸ì´ë©´ OAuth2User íƒ€ì…ìœ¼ë¡œ ë°˜í™˜

https://github.com/dododo33/Bakery_Shop_project/assets/101379925/ffeb6800-7347-4cb6-b116-24986fc8615b   

### íšŒì›ê°€ì… ì‹œ ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥ êµ¬í˜„
- spring-boot-starter-mail ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- application.properties ì— êµ¬ê¸€ smtp ì„¤ì • ì¶”ê°€
- mail controllerì™€ mail service ì„¤ê³„
- ë§ˆì£¼í•œ ì—ëŸ¬ì™€ í•´ê²°ê³¼ì •
    - `401 error`  

      : ë‹¤ìŒê³¼ ê°™ì´ http.authorizeRequests()ì— /mail/ê³¼ ê´€ë ¨ëœ ê²½ë¡œë¥¼ ëª¨ë‘ permitAll() í•´ì¤Œìœ¼ë¡œì¨ ê¶Œí•œë¬¸ì œ í•´ê²°
    ```java
    http.authorizeRequests()                        
                    .mvcMatchers("/css/**", "/js/**", "/img/**").permitAll()   
                    .mvcMatchers("/", "/members/**", "/item/**", "/images/**", "/mail/**").permitAll()
    ```
    
    - `403 error` ì—ëŸ¬ ë°œìƒ  
    
     : csrfë¥¼ disable í•¨ìœ¼ë¡œì¨ ë¬¸ì œ í•´ê²°
    ```java
    http.authorizeRequests()                       
                    .mvcMatchers("/css/**", "/js/**", "/img/**").permitAll()  
                    .mvcMatchers("/", "/members/**", "/item/**", "/images/**", "/mail/**").permitAll()
                    .mvcMatchers("/admin/**").hasRole("ADMIN")    
                    .anyRequest().authenticated()
                    .and()
                    .csrf().ignoringAntMatchers("/mail/**") // csrf disable ì„¤ì • 
            ;
    ```

(ì´ë©”ì¼ ì „ì†¡ ì¸ì¦)

![1](https://github.com/dododo33/Bakery_Shop_project/assets/101379925/9f3a7e63-a35c-4236-b4d4-090b0e59779e)

![2](https://github.com/dododo33/Bakery_Shop_project/assets/101379925/9ede49ee-0039-4e26-8a62-e2d9cd0c6329)

![3](https://github.com/dododo33/Bakery_Shop_project/assets/101379925/e53be39a-c027-4122-b9c9-1c928564921d)

![4](https://github.com/dododo33/Bakery_Shop_project/assets/101379925/fd877072-ca6f-4bb6-a121-d60fc06c1256)

![5](https://github.com/dododo33/Bakery_Shop_project/assets/101379925/2814e06d-9331-48c2-84e9-51af62793504)





## ë¬¸ì œí•´ê²°
- 401 error
     : csrf ì˜ˆì™¸ì²˜ë¦¬ ì„¤ì •ì„ í†µí•´ í•´ê²°    
## ERD 
  







